<!DOCTYPE html>
<html>
    <head>
        <meta charset = "utf-8">
        <title>Rotate to Mouse</title>
        <link rel = "stylesheet" href = "style.css">
    </head>
    <body>
        <canvas id = "canvas" width = "400" height = "400"></canvas>
        <script src = "utils.js"></script>
        <script src = "arrow.js"></script>
        <script>
            window.onload = function(){
                var canvas = document.getElementById('canvas'),
                    context = canvas.getContext('2d'),
                    //返回用于在画布上绘图的环境
                    mouse = utils.captureMouse(canvas),
                    //返回鼠标的坐标
                    arrow = new Arrow();
                //
                arrow.x = canvas.width/2;
                arrow.y = canvas.height/2;

                (function drawFrame(){
                 window.requestAnimationFrame(drawFrame,canvas);
                 context.clearRect(0,0,canvas.width,canvas.height);
                 //在给定矩形内清空一个矩形

                 var dx = mouse.x -arrow.x,
                     dy = mouse.y - arrow.y;

                arrow.rotation = Math.atan2(dy,dx);
                arrow.draw(context)
                 }());

            };
        </script>
    </body>
</html>
